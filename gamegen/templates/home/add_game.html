{% extends "base.html" %}
{% load i18n %}



{% block content %}
<label for="game" class="form-label">{% trans 'GameName' %}</label>
<div class="input-group mb-3">
    <select id="select-game" class="form-select" style="width:10vw" name="game" data-placeholder="Choose one game">
        <option value="">{% translate "" %}</option>
        {% for game in games %}
        <option value="{{game.id}}">{{game.name}}</option>
        {% endfor %}
    </select>
    <button class="btn btn-outline-secondary" type="button" id="button-addon2" data-bs-toggle="modal" data-bs-target="#gameModal">+</button>
</div>
</br>

<label for="location" class="form-label">{% trans 'Location' %}</label>
<select id="location" class="select select-location select2" style="width:10vw" name="location" hx-get="{% url 'AddDislikes' %}" hx-target="#dislikerDiv" hx-trigger="change">
    <option value=""></option>
    {% for location in locations %}
    <option value="{{location.id}}">{{location.name}}</option>
    {% endfor %}
</select>

<div id="dislikerDiv">

</div>


  <!-- Modal -->
  <div class="modal fade" id="gameModal" tabindex="-1" aria-labelledby="gameModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="gameModalLabel">{% translate "New Game" %}</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <h3>{% translate "Import from BGG" %}</h3>
            <div class="input-group mb-3">
                <input type="text" id="InputBGGId" class="form-control" placeholder="BGG Game ID">
                <button class="btn btn-outline-secondary" type="button" id="button-addon2">{% translate "Get Data" %}</button>
              </div>
            </form>
            <hr>
            <h3>{% translate "Game Data" %}</h3>
            <div id="game_data">
                {% include "home/game_data_htmx.html" %}
            </div>
          </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>



<script>

    window.addEventListener("DOMContentLoaded", (e) => {
        $('select').on('select2:select', function (e) {
            $(this).closest('select').get(0).dispatchEvent(new Event('change'));
        });

    });
    $( '#select-game' ).select2( {
        theme: "bootstrap-5",
        width: $( this ).data( 'width' ) ? $( this ).data( 'width' ) : $( this ).hasClass( 'w-100' ) ? '100%' : 'style',
        placeholder: $( this ).data( 'placeholder' ),
    } );   

    //https://boardgamegeek.com/xmlapi2/thing/?id=355326 -> Zeigt auf Heroes of Might and Magic
</script>


{% endblock content %}

